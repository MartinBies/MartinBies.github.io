(1) Preliminaries
-----------------

These installation instructions have been tested and designed for 

(*) Debian 9, 4 CPUs, 15GB RAM
(*) Ubuntu 18.04, 8 CPUs, 32GB RAM

on 01/02/20.



(2) Install dependencies provided by the package manager
--------------------------------------------------------

sudo apt-get install autoconf build-essential libgmp-dev libtool git libatlas-base-dev libblas-dev liblapack-dev screen singular 4ti2 libcdd-dev



(3) Install gap
---------------

(3a) Download and extract latest gap

curl -O https://www.gap-system.org/pub/gap/gap-4.10/tar.gz/gap-4.10.2.tar.gz
tar xf gap-4.10.2.tar.gz

(3b) Configure and install gap

cd gap-4.10.2
./configure --with-gmp=system
make

(3c) Test installation (not mandatory)

./gap 
Read( Filename( DirectoriesLibrary( "tst" ), "testinstall.g" ) );

(3d) Configure the shipped packages

cd bin/
./BuildPackages.sh
cd ..

(3e) Install IO-package

cd pkg/io*
./configure
make
cd ../..

(3f) Add folder in which we will store new and updated software

mkdir local
cd local/
mkdir pkg
cd ..

(3g) Include new folder in search path of gap script

cd bin/
sed -i '$ d' gap.sh
echo 'exec "$GAP_EXE/gap" -l "$GAP_DIR/local;$GAP_DIR" "$@"' >> gap.sh
cd ..

(3h) Copy the gap.sh script to /usr/bin/gap so that we can execute gap by issuing gap

sudo cp bin/gap.sh /usr/bin/gap



(4) Install software of the homalg_project
------------------------------------------

(4.1) Clone the latest software from github

cd local/pkg/
curl -O https://martinbies.github.io/homalg_clone.sh
chmod +x homalg_clone.sh
./homalg_clone.sh

(4.2) Install Gauss

cd homalg_project/Gauss/
./configure ../../../../
make
cd ../..

(4.3) Install CddInterface

cd CddInterface/
./install.sh ../../..
cd ..

(4.4) Install NormalizInterface

cd NormalizInterface/
./build-normaliz.sh ../../..
./autogen.sh ../../..
./configure --with-gaproot=../../..
make
cd



(5) Install spasm and configure SpasmInterface
----------------------------------------------

git clone https://github.com/HereAround/spasm.git
cd spasm
git checkout -b martin_devel
git pull origin martin_devel
aclocal
autoconf
autoreconf --install
./configure
make
cd bench/
gap
LoadPackage( "SpasmInterface" );
path := DirectoriesSystemPrograms();;
pwd := Filename( path, "pwd" );;
stdin := InputTextUser();;
str := "";;
stdout := OutputTextString(str,true);;
String ( Process( DirectoryCurrent(), pwd, stdin, stdout, [] ) );;
SetSpasmDirectory( str );
quit;
cd ../..



(6) Test installation (not mandatory)
-------------------------------------

cd gap-4.10.2/local/pkg/SheafCohomologyOnToricVarieties/SheafCohomologyOnToricVarieties/
gap makedoc.g
gap maketest.g

This will produce a bit of output in the console. The only occurances that are to be taken care of are "expected output: ..." followed by "But found:". Currently, there should only be two such occurances as follows

H0ParallelBySpasm( P1xP1, irP1xP1 );;
# Expected output:
# But found: *followed by some output*

This is nothing to worry about - I will fix this misbehaviour soonish.


(7) Known issue with spasm installation
---------------------------------------

In the past, the above test has sometimes raised the error:

"error while loading shared libraries: libspasm.so.0: cannot open shared object file: No such file or directory"

This can be fixed by first locating the library libspasm.so.0 and then exporting it into the search path of C++. To so first issue

find ~ -name libspasm.so.0

This should provide a path similar to /home/username/spasm/src/.libs/libspasm.so.0. Then export the path of this library path by issuing

export LD_LIBRARY_PATH=/home/username/spasm/src/.libs/

Note that in this command, libspasm.so.0 has been removed from the path obtain above. For more details on a similar issue see https://github.com/genome/pindel/issues/101.



(7) Have fun
------------
That is it - installation complete. Have fun!
